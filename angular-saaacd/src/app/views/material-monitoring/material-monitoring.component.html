<h1 class="title">Monitoreo de material</h1>
<div class="controlStyle">
	<mat-form-field appearance="fill">
	  <mat-label>Fecha de Pronóstico</mat-label>
	  <input matInput (dateChange)="changeFutureDate($event)" [min]="minDate" [max]="maxDate" [matDatepicker]="picker">
	  <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
	  <mat-datepicker #picker></mat-datepicker>
	</mat-form-field>
	
	<button id="exportButton" (click)="downloadPDF()" [disabled]="false">Exportar PDF</button>
</div>

<div class="grid-two-spaces">
	<div>
		<img #img [src]="mapImageUrl" (load)="onLoad()" style="display: none;"/>
		<div id="map" class="map" ></div>
	</div>
	
	<div>
		<h4>Categorías:</h4>
		<table >
		  <tr *ngFor="let category of superiorCategories; let i = index">
			<td><div class='circleList' style="background-color:{{chartColors[i]}};"></div></td>
			<td>{{ category}}</td>
		  </tr>
		</table>
	</div>
</div>

<div id="htmlData" class="tableStyle">
	<h3 class="title">Material requerido</h3>
	<table mat-table [dataSource]="dataSource" multiTemplateDataRows matSort >
		<!-- ID Column -->
		<ng-container matColumnDef="id">
		  <th mat-header-cell *matHeaderCellDef mat-sort-header>Id</th>
		  <td mat-cell *matCellDef="let row">{{row.id}}</td>
		  <td mat-footer-cell *matFooterCellDef></td>
		</ng-container>
		
		<!-- Nombre Column -->
		<ng-container matColumnDef="nombre">
		  <th mat-header-cell *matHeaderCellDef mat-sort-header> Nombre </th>
		  <td mat-cell *matCellDef="let row" >{{row.nombre}}</td>
		  <td mat-footer-cell *matFooterCellDef></td>
		</ng-container>
		
		<!-- Cantidad Column -->
		<ng-container matColumnDef="cantidad">
		  <th mat-header-cell *matHeaderCellDef mat-sort-header>Cantidad</th>
		  <td mat-cell *matCellDef="let row">{{row.cantidad}}</td>
		  <td mat-footer-cell *matFooterCellDef><span class="placeName">Total</span></td>
		</ng-container>
		
		<!-- Precio Column -->
		<ng-container matColumnDef="precio">
		  <th mat-header-cell *matHeaderCellDef mat-sort-header>Precio Unitario</th>
		  <td mat-cell *matCellDef="let row">{{row.precio | currency}}</td>
		  <td mat-footer-cell *matFooterCellDef><span class="placeName">{{deviceTotalPrice | currency}}</span></td>
		</ng-container>

		<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
		<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
		<tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
	</table>
	<mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
</div>

<div class="overlay" *ngIf="actionInProgress">
	<div class="center">
		<mat-progress-spinner mode="indeterminate">
		</mat-progress-spinner>
	</div>
</div>