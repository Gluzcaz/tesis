<h1 class="title">Estadística de Material</h1>
<div class="grid-four-spaces">
	<mat-form-field appearance="fill">
		<mat-label>Semestre:</mat-label>
		<mat-select [(ngModel)]="selectedSemester" (selectionChange)="filterStatistics()">
		  <mat-option *ngFor="let semester of semesters" [value]="semester.id">
			{{semester.nombre}}
		  </mat-option>
		</mat-select>
	</mat-form-field>
	
	<mat-form-field appearance="fill">
		<mat-label>Tipo de ubicaciones: </mat-label>
		<mat-select [(ngModel)]="selectedLocationType"(selectionChange)="filterStatistics()">
		  <mat-option *ngFor="let locationType of locationTypes" [value]="locationType.value">
			{{locationType.key}}
		  </mat-option>
		</mat-select>
	</mat-form-field>

	<mat-form-field appearance="fill">
		<mat-label>Tipos de gráficas: </mat-label>
		<mat-select [(ngModel)]="selectedChartType"(selectionChange)="changeChartType($event.value)">
		  <mat-option *ngFor="let charType of charTypes" [value]="charType.value">
			{{charType.key}}
		  </mat-option>
		</mat-select>
	</mat-form-field>
	
    <button id="exportButton" (click)="downloadPDF()" [disabled]="false">Exportar PDF</button>

</div>

<div id="htmlData" class="grid-two-spaces">
	<div>
		<img #img [src]="mapImageUrl" (load)="onLoad()" style="display: none;"/>
		<div id="map" class="map" ></div>
	</div>
	
	<div>
		<h4>Categorias:</h4>
		<table>
		  <tr *ngFor="let category of superiorCategories; let i = index">
			<td><div class='circleList' style="background-color:{{chartColors[i]}};"></div></td>
			<td>{{ category }}</td>
		  </tr>
		</table>
	</div>
</div>

<div class="overlay" *ngIf="actionInProgress">
	<div class="center">
		<mat-progress-spinner mode="indeterminate">
		</mat-progress-spinner>
	</div>
</div>
